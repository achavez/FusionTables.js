/* @license
 *                ____
 *  _____________|    |_
 * |_____________|    |_|
 * | ____  ____  |    | |
 * ||____||    | |____| |
 * || /\/||    |        |
 * ||/   ||____|        |
 * ||____|              |
 *  ————————————————————
 *
 * FusionTables.js v1.1.5
 * https://github.com/achavez/FusionTables.js
 *
 * Copyright (c) 2014 Andrew Chavez
 * Licensed under the MIT license.
 */
!function(a,b){"function"==typeof define&&define.amd?define(["jquery","underscore"],b):a.FusionTables=b($,_)}(this,function(a,b){"use strict";function c(a){if(this.options=a||{},!this.options.tableId)throw new Error("A Fusion Tables Table ID is required.");if(!this.options.key&&!this.options.proxy)throw new Error("Either an API key or a URL to a proxy that will sign your requests is required.");this.options.columns=this.options.columns||[],this.options.uri=this.options.proxy||"https://www.googleapis.com/",this.options.cache=this.options.cache||!1}return c.prototype={request:function(b,c,d,e,f,g){var h="fusiontables/v1/"+b;c=c||{},this.options.key&&(c.key=this.options.key),this.options.cache!==!0&&g!==!0||g===!1||("undefined"!=typeof console&&console.warn&&!this.options.proxy&&console.warn("FusionTables.js: The cache parameter has no effect on direct Fusion Tables API requests."),c.key&&delete c.key,c.cache=!0);var i={url:this.options.uri+h,contentType:"application/json",data:c};i.dataType=this.options.proxy?"json":"jsonp",a.ajax(i).done(function(a){"function"==typeof f&&(a=f(a)),d(a)}).fail(function(a,b,c){e(c)})},rowsParser:function(a){return a.rows?b.map(a.rows,function(c){var d={};return b.each(c,function(b,c){"rowid"===a.columns[c]&&(b=parseInt(b,10)),d[a.columns[c]]=b}),d}):null},rowParser:function(a){if(!a.rows)return null;var c={};return b.each(a.rows[0],function(b,d){"rowid"===a.columns[d]&&(b=parseInt(b,10)),c[a.columns[d]]=b}),c},columnParser:function(a){return b.pluck(a.items,"name")},sqlSelect:function(a){return a=a||this.options.columns,a===["*"]||b.contains(a,"ROWID")||a.push("ROWID"),"SELECT "+a.join(", ")+" FROM "+this.options.tableId},sqlWhere:function(a,b,c){if(!a||"undefined"==typeof b)throw new Error("The column and value properties are required in the where object.");return c=c||"=","WHERE "+a+" "+c+" "+b},sqlLimit:function(a){return"LIMIT "+a},sqlQuery:function(a,b,c){var d=[this.sqlSelect(c)];a&&d.push(this.sqlWhere(a.column,a.value,a.operator)),b&&d.push(this.sqlLimit(b));var e=d.join(" "),f={sql:e,typed:!0,hdrs:!1};return f},row:function(a,b,c,d){if("undefined"==typeof c)throw new Error("The where clause is required when calling FusionTables.row");var e=d||{},f=e.parser||this.rowParser,g=this.sqlQuery(c,1,e.columns);this.request("query",g,a,b,f,e.cache)},rows:function(a,b,c,d){var e=d||{},f=e.parser||this.rowsParser,g=this.sqlQuery(c,e.limit,e.columns);this.request("query",g,a,b,f,e.cache)},columns:function(a,b,c){var d=c||{},e=d.parser||this.columnParser,f="tables/"+this.options.tableId+"/columns";this.request(f,null,a,b,e,d.cache)},query:function(a,b,c,d){var e=d||{},f=e.parser||this.rowsParser,g={sql:c,typed:!0,hdrs:!1};this.request("query",g,a,b,f,e.cache)}},c});
//# sourceMappingURL=fusiontables.min.map